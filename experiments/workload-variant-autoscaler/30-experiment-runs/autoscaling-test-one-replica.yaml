apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  generateName: autoscaling-test-1-replica-
  namespace: experiment-01
spec:
  params:
    - name: target-url
      value: 'openshift-ai-inference-openshift-ai-inference.openshift-ingress.svc.cluster.local'
    - name: model
      value: meta-llama/Llama-3.1-8B
    - name: reset-llm-d
      value: 'true'
    - name: namespace
      value: experiment-01
    - name: test-name
      value: replica-1
    - name: scaled-object
      value: ""
    - name: initial-replicas
      value: "1"
  pipelineRef:
    name: wva-incremental-stepped-load-test
  taskRunTemplate:
    podTemplate:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: kubernetes.io/arch
                    operator: In
                    values:
                      - amd64
    serviceAccountName: pipeline
  timeouts:
    finally: 1h0m0s
    pipeline: 12h0m0s
    tasks: 4h0m0s
  workspaces:
    - name: shared-workspace
      volumeClaimTemplate:
        metadata:
          creationTimestamp: null
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 32Gi
        status: {}